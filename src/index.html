<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SaveMyExam Downloader App - Homepage</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>
<body x-data="$store.subjectData">
<h1 class="title">SaveMyExam Downloader</h1>


<div class="button-container" x-show="isEmpty">
    <button id="loginBtn">
        <i class="fas fa-circle-notch fa-spin loader hidden"></i>
        <i class="fa-solid fa-arrow-right-to-bracket icon"></i>
        <span class="btn-label">Login & Browse</span>
    </button>
</div>

<div class="main-container" x-show="!isEmpty">
    <h2 class="text-center" id="user-greeting"></h2>
    <p class="text-center">
        Welcome to your Save My Exams account and launchpad to stress-free and effective study.
    </p>

    <div class="table-action">
        <span class="success"><i class="fas fa-circle-check"></i> Completed</span>
    </div>
    <div class="table-container">
        <table class="styled-table">
            <thead>
            <tr>
                <th>
                    <label class="checkbox-container">
                        <input type="checkbox" id="parent-checkbox" x-model="selectAll" @change="toggleAll"
                               x-ref="parentCheckbox">
                        <span class="checkmark"></span>
                    </label>
                </th>
                <th>Subject</th>
                <th>Level</th>
            </tr>
            </thead>
            <tbody>

            <template x-for="item in $store.subjectData.items" :key="item.id">
                <tr @click="item.checked = !item.checked; updateSelectAllState()"
                    :class="{'checked-row': item.checked,'success completed': item.completed}">
                    <td @click.stop>
                        <label class="checkbox-container">
                            <input type="checkbox" class="child-checkbox" x-model="item.checked"
                                   @change="updateSelectAllState()">
                            <span class="checkmark"></span>
                        </label>
                    </td>
                    <td>
                        <span x-show="item.completed"><i class="fas fa-circle-check"></i> </span>
                        <span x-text="item.subjectTitle"></span>
                    </td>
                    <td x-text="item.subjectLevel"></td>
                </tr>
            </template>
            </tbody>
        </table>
    </div>

    <div class="nextBtn--container">
        <button id="syncList"
                @click="updateList()"
                :disabled="listLoading"
        >
            <i class="fa-solid fa-sync" :class="{ 'fa-spin': listLoading }"></i>
            <span class="btn-label">Refresh List</span>
        </button>
        <button
                id="startDownload"
                @click="downloadSelected()"
                :disabled="!hasSelectedItems || loading || listLoading"
        >
            <span class="btn-label">Next</span>
            <i class="fas fa-circle-notch fa-spin loader" x-show="loading"></i>
            <i class="fa-solid fa-arrow-right-long icon" x-show="!loading"></i>
        </button>
    </div>
</div>


<h6 class="author" title="Click for view Author Message">
    MiRzA Haris Â© All right reserved.
</h6>

<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js"></script>
<!-- Link to the JavaScript file -->
<script src="./index-renderer.js"></script>
</body>
</html>


